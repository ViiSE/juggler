<p align="center"> 
<img src="https://user-images.githubusercontent.com/43209824/150384221-6087fedd-9e52-4a03-a0e4-4248be39a3d0.png"
     width="256" height="256">
</p>

# Juggler
Смена JDK на Windows на лету.

## Для чего нужен?
Была потребность в изменении JDK на уровне системы на лету. Для Linux и Mac OS, например, существует такое решение как
[SDKMAN!](https://github.com/sdkman). Конечно, можно поставить его на Windows, например, через mingw или git. Но SDKMAN!
будет менять JDK только на уровне mingw, не на уровне операционной системы Windows. Также существует такое решение, как 
[jabba](https://github.com/shyiko/jabba), но оно также меняет JDK только на уровне сессии. По этим причинам и был 
написан Juggler.

## Как это работает?
Juggler изменяет переменные среды `JAVA_HOME` и `PATH`. В `PATH` он ищет значение переменной, которая удовлетворяет 
хотя бы одному паттерну, заданным пользователем (вкладка `Edit/Change JDK path patterns...`). Если паттерны не 
определены, то Juggler создаст паттерн `\java\jdk`. Стоит учитывать, что регистр не влияет на поиск переменной, так как 
при поиске ее значение переводится в нижний регистр, как и паттерн.

## Функционал
Возможности Juggler:
 1. Создавать и изменять список доступных JDK: у каждой JDK есть путь и алиас (имя в удобочитаемом формате)
 2. Выбирать из списка доступных JDK тот, который будет использоваться в системе по умолчанию
 3. Создавать и изменять список паттернов, использующийся для поиска папки исполняемых файлов JDK в переменной `PATH`
 4. Juggler сворачивается в System Tray. Для этого необходимо закрыть программу через системную кнопку `Закрыть` 
    (красный крестик). В этом режиме также можно менять JDK на лету и производить действия с PATH и JAVA_HOME
 5. Получать, сохранять, восстанавливать JAVA_HOME и PATH, и восстанавливать ключ реестра 
    `HKEY_CLASSES_ROOT\jarfile\shell\open\command` по сохраненной переменной JAVA_HOME
 6. Changing the JDK also changes the value of the `HKEY_CLASSES_ROOT\jarfile\shell\open\command` registry key. The key 
    is needed so that the jar file opens when the mouse is double-clicked

## Особенности
 1. Изменение системных переменных сред требует административных прав пользователя. Поэтому программа запускается в 
    режиме `от администратора`
 2. Изменение системных переменных сред довольно долгий процесс (секунд 10-15). С чем это связано - не знаю. Если кто-то 
    знает, то буду благодарен за ответ! Скажу, что переменные среды меняются через 
    `Environment.SetEnvironmentVariable("ENV_VAR", envVarValue, EnvironmentVariableTarget.Machine)`
 3. Для сохранения состояния Juggler создает папку `.juggler` в папке пользователя. В этой папке в файле `settings.json` 
    сохраняется список JDK, включая JDK по умолчанию, и список паттернов, использующийся для поиска папки исполняемых 
    файлов JDK в переменной `PATH`

## Как использовать?
Распакуйте [архив](https://github.com/ViiSE/juggler/releases/tag/Release) в удобном для вас месте и запустите 
`Juggler.exe` Можете создать ярлык для быстрого доступа `:)`.
